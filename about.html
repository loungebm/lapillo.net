<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>About - lapillo</title>
    <link href="https://cdn.jsdelivr.net/npm/@shadcn/ui@latest/dist/tailwind.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="studio-lapillo.css">
    
    <!-- Firebase CDN -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-compat-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-compat-storage.js"></script>
    
    <!-- Firebase ì„¤ì • ë° ì»´í¬ë„ŒíŠ¸ ì‹œìŠ¤í…œ -->
    <script src="js/firebase-cdn.js"></script>
    <script src="js/component-loader.js"></script>
    <script src="js/navigation-manager.js"></script>
</head>
<body class="bg-white font-sans">
    <!-- Header Component Placeholder -->
    <div id="header-placeholder"></div>

    <!-- Main Content -->
    <main class="py-6">
        <div class="project-detail-wrapper">
            <!-- Text Section - 2 Columns -->
            <div class="project-text-section">
                <!-- Left Column -->
                <div class="project-text-left">
                    <div class="project-description">
                        <p id="about-left-content">
                            lapilloëŠ” ë””ìì´ë„ˆì™€ ì‘ê°€ë¥¼ í™œë™í•˜ëŠ” ê¹€í˜ì›ê³¼ ê°•ë³´ì˜ì´ ìš´ì˜í•˜ëŠ” ê·¸ë˜í”½ ìŠ¤íŠœë””ì˜¤ë¡œ ë¸Œëœë“œ ë””ìì¸ í”„ë¡œì íŠ¸ì™€ ê°œì¸ ì•„íŠ¸ì›Œí¬ë¥¼ ì„ ë³´ì…ë‹ˆë‹¤.
                        </p>
                    </div>
                </div>
                
                <!-- Right Column -->
                <div class="project-text-right">
                    <div class="project-description">
                        <p id="about-right-content">
                            ìŠ¤íŠœë””ì˜¤ì˜ ì´ë¦„ì¸ LapilloëŠ” í™”ì‚° ìê°ˆì´ë¼ëŠ” ëœ»ìœ¼ë¡œ ìê°ˆì˜ ê°œì„±ìˆëŠ” í˜•íƒœë¡œ ê±°ë¦„ë°›ë‹ˆë‹¤. ì´ë ‡ê²Œ ì‹œì‹œê°ê° ë³€í™”í•˜ëŠ” ì‹œê°„ ì† - ìš°ë¦¬ ëª¨ë‘ê°€ ê°ê¸° ë‹¤ë¥¸ ë¹›ê³¼ ëª¨ì–‘ì˜ ì¡°ì•½ëŒ - ì´ë¼ëŠ” ëœ»ì„ ë‹´ê³ ì í•˜ì˜€ìŠµë‹ˆë‹¤.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer Component Placeholder -->
    <div id="footer-placeholder"></div>

    <script>
        // ëª¨ë°”ì¼ ë©”ë‰´ í† ê¸€ ê¸°ëŠ¥ (ì»´í¬ë„ŒíŠ¸ ë¡œë“œ í›„ ì‹¤í–‰)
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                const hamburgerBtn = document.getElementById('hamburger-btn');
                const mobileMenu = document.getElementById('mobile-menu');
                const closeMobileMenuBtn = document.getElementById('close-mobile-menu');
                const hamburgerLines = document.querySelector('.hamburger-lines');
                const closeLines = document.querySelector('.close-lines');
                let isOpen = false;

                function toggleMenu() {
                    isOpen = !isOpen;
                    if (mobileMenu) {
                        mobileMenu.classList.toggle('open', isOpen);
                    }
                    if (hamburgerLines) {
                        hamburgerLines.style.display = isOpen ? 'none' : 'block';
                    }
                    if (closeLines) {
                        closeLines.style.display = isOpen ? 'block' : 'none';
                    }
                }

                if (hamburgerBtn) {
                    hamburgerBtn.addEventListener('click', toggleMenu);
                }
                if (closeMobileMenuBtn) {
                    closeMobileMenuBtn.addEventListener('click', toggleMenu);
                }

                // ëª¨ë°”ì¼ ë©”ë‰´ ë§í¬ í´ë¦­ ì‹œ ë©”ë‰´ ë‹«ê¸°
                if (mobileMenu) {
                    const menuLinks = mobileMenu.querySelectorAll('a');
                    menuLinks.forEach(link => {
                        link.addEventListener('click', () => {
                            if (isOpen) {
                                toggleMenu();
                            }
                        });
                    });
                }

                // í™”ë©´ í¬ê¸° ë³€ê²½ ì‹œ ë©”ë‰´ ë‹«ê¸°
                window.addEventListener('resize', () => {
                    if (window.innerWidth >= 768 && isOpen) {
                        toggleMenu();
                    }
                });
            }, 1000); // ì»´í¬ë„ŒíŠ¸ ë¡œë“œ í›„ ì‹¤í–‰
        });

        // About í˜ì´ì§€ ì»¨í…ì¸  ë¡œë“œ
        async function loadAboutContent() {
            try {
                console.log('ğŸ“ About í˜ì´ì§€ ì»¨í…ì¸  ë¡œë”© ì‹œì‘...');
                
                // Firebase ì„œë¹„ìŠ¤ ëŒ€ê¸°
                let retryCount = 0;
                while (!window.firebaseService && retryCount < 10) {
                    console.log(`â³ Firebase ì„œë¹„ìŠ¤ ëŒ€ê¸° ì¤‘... (${retryCount + 1}/10)`);
                    await new Promise(resolve => setTimeout(resolve, 500));
                    retryCount++;
                }
                
                if (!window.firebaseService) {
                    throw new Error('Firebase ì„œë¹„ìŠ¤ë¥¼ ì´ˆê¸°í™”í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                }
                
                // About í˜ì´ì§€ ë°ì´í„° ë¡œë“œ
                const aboutData = await window.firebaseService.getTextPage('about');
                console.log('âœ… About ë°ì´í„° ë¡œë“œ:', aboutData);
                
                if (aboutData) {
                    // ë‚´ìš© ì—…ë°ì´íŠ¸
                    const leftContent = document.getElementById('about-left-content');
                    const rightContent = document.getElementById('about-right-content');
                    
                    if (leftContent && aboutData.leftColumn) {
                        leftContent.textContent = aboutData.leftColumn;
                    }
                    
                    if (rightContent && aboutData.rightColumn) {
                        rightContent.textContent = aboutData.rightColumn;
                    }
                    
                    console.log('âœ… About í˜ì´ì§€ ì»¨í…ì¸  ì—…ë°ì´íŠ¸ ì™„ë£Œ');
                }
                
            } catch (error) {
                console.error('âŒ About í˜ì´ì§€ ì»¨í…ì¸  ë¡œë“œ ì—ëŸ¬:', error);
                // ì—ëŸ¬ê°€ ë°œìƒí•´ë„ ê¸°ë³¸ ì»¨í…ì¸ ëŠ” ìœ ì§€
            }
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì»´í¬ë„ŒíŠ¸ ë¡œë“œ ë° ì»¨í…ì¸  ë¡œë“œ
        document.addEventListener('DOMContentLoaded', async () => {
            console.log('ğŸ“– About í˜ì´ì§€ ì´ˆê¸°í™” ì‹œì‘...');

            console.log('ğŸ”„ ì»´í¬ë„ŒíŠ¸ ë¡œë”© ì‹œì‘...');
            await loadComponent('header-placeholder', 'components/header.html');
            await loadComponent('footer-placeholder', 'components/footer.html');
            console.log('âœ… ì»´í¬ë„ŒíŠ¸ ë¡œë”© ì™„ë£Œ');

            // NavigationManager ì´ˆê¸°í™” ë° ì—…ë°ì´íŠ¸
            if (window.navigationManager) {
                window.navigationManager.currentPage = 'about'; // í˜„ì¬ í˜ì´ì§€ ì„¤ì •
                await window.navigationManager.updateNavigation();
                console.log('âœ… ë„¤ë¹„ê²Œì´ì…˜ ì—…ë°ì´íŠ¸ ì™„ë£Œ');
            } else {
                console.warn('âš ï¸ NavigationManagerê°€ ì—†ìŠµë‹ˆë‹¤');
            }

            await loadAboutContent();
            console.log('âœ… About í˜ì´ì§€ ì´ˆê¸°í™” ì™„ë£Œ');
        });
    </script>
</body>
</html>
